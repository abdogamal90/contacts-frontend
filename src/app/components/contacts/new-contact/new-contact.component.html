<div class="new-contact-container">
  <div class="form-card">
    <div class="form-header">
      <h2>Create New Contact</h2>
      <p class="subtitle">Add a new contact to your list</p>
    </div>

    <form [formGroup]="contactForm" class="contact-form">
      <div class="form-group">
        <label for="name">
          Full Name <span class="required">*</span>
        </label>
        <input 
          id="name"
          type="text" 
          formControlName="name" 
          placeholder="Enter full name"
          [class.invalid]="contactForm.get('name')?.invalid && contactForm.get('name')?.touched"
        >
        <div class="field-footer">
          <div class="validation-messages">
            <div class="error-text" *ngIf="contactForm.get('name')?.hasError('required') && contactForm.get('name')?.touched">
              Name is required
            </div>
            <div class="error-text" *ngIf="contactForm.get('name')?.hasError('minlength') && contactForm.get('name')?.touched">
              Name must be at least 2 characters
            </div>
            <div class="error-text" *ngIf="contactForm.get('name')?.hasError('maxlength')">
              Name cannot exceed 50 characters
            </div>
          </div>
          <span class="char-count" [class.limit-warning]="(contactForm.get('name')?.value?.length || 0) > 45">
            {{ contactForm.get('name')?.value?.length || 0 }}/50
          </span>
        </div>
      </div>

      <div class="form-group">
        <label for="phone">
          Phone Number <span class="required">*</span>
        </label>
        <input 
          id="phone"
          type="tel" 
          formControlName="phone" 
          placeholder="Enter phone number"
          [class.invalid]="contactForm.get('phone')?.invalid && contactForm.get('phone')?.touched"
        >
        <div class="field-footer">
          <div class="validation-messages">
            <div class="error-text" *ngIf="contactForm.get('phone')?.hasError('required') && contactForm.get('phone')?.touched">
              Phone number is required
            </div>
            <div class="error-text" *ngIf="contactForm.get('phone')?.hasError('pattern') && contactForm.get('phone')?.touched">
              Phone must contain only numbers
            </div>
            <div class="error-text" *ngIf="contactForm.get('phone')?.hasError('minlength') && contactForm.get('phone')?.touched">
              Phone must be at least 10 digits
            </div>
            <div class="error-text" *ngIf="contactForm.get('phone')?.hasError('maxlength')">
              Phone cannot exceed 15 digits
            </div>
          </div>
          <span class="char-count" [class.limit-warning]="(contactForm.get('phone')?.value?.length || 0) > 13">
            {{ contactForm.get('phone')?.value?.length || 0 }}/15
          </span>
        </div>
      </div>

      <div class="form-group">
        <label for="address">
          Address <span class="required">*</span>
        </label>
        <input 
          id="address"
          type="text" 
          formControlName="address" 
          placeholder="Enter address"
          [class.invalid]="contactForm.get('address')?.invalid && contactForm.get('address')?.touched"
        >
        <div class="field-footer">
          <div class="validation-messages">
            <div class="error-text" *ngIf="contactForm.get('address')?.hasError('required') && contactForm.get('address')?.touched">
              Address is required
            </div>
            <div class="error-text" *ngIf="contactForm.get('address')?.hasError('maxlength')">
              Address cannot exceed 200 characters
            </div>
          </div>
          <span class="char-count" [class.limit-warning]="(contactForm.get('address')?.value?.length || 0) > 180">
            {{ contactForm.get('address')?.value?.length || 0 }}/200
          </span>
        </div>
      </div>

      <div class="form-group">
        <label for="notes">Notes</label>
        <textarea 
          id="notes"
          formControlName="notes" 
          placeholder="Add any additional notes (optional)"
          rows="4"
        ></textarea>
        <div class="field-footer">
          <div class="validation-messages">
            <div class="error-text" *ngIf="contactForm.get('notes')?.hasError('maxlength')">
              Notes cannot exceed 500 characters
            </div>
          </div>
          <span class="char-count" [class.limit-warning]="(contactForm.get('notes')?.value?.length || 0) > 480">
            {{ contactForm.get('notes')?.value?.length || 0 }}/500
          </span>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-secondary" routerLink="/contacts">
          Cancel
        </button>
        <button 
          type="submit" 
          class="btn-primary" 
          (click)="createContact()"
          [disabled]="contactForm.invalid"
        >
          <span>Create Contact</span>
        </button>
      </div>
    </form>
  </div>
</div>
